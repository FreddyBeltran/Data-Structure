#include <iostream>
using namespace std;

void display(int mat[4][4]){
  for(int i=0; i<4; i++){
    for(int j=0; j<4; j++){
      cout<<mat[i][j];
      if(j<3){
        cout<<" ";
      }
    }
    cout<<endl;
  }
}

void turn(int mat[4][4],int giros){
  int matNueva[4][4];

  for(int i=0;i<giros;i++){
    //Primera fila
    matNueva[0][0]=mat[3][0];
    matNueva[0][1]=mat[2][0];
    matNueva[0][2]=mat[1][0];
    matNueva[0][3]=mat[0][0];

    //Seguna fila
    matNueva[1][0]=mat[3][1];
    matNueva[1][1]=mat[2][1];
    matNueva[1][2]=mat[1][1];
    matNueva[1][3]=mat[0][1];

    //Tercera fila
    matNueva[2][0]=mat[3][2];
    matNueva[2][1]=mat[2][2];
    matNueva[2][2]=mat[1][2];
    matNueva[2][3]=mat[0][2];

    //Cuarta fila
    matNueva[3][0]=mat[3][3];
    matNueva[3][1]=mat[2][3];
    matNueva[3][2]=mat[1][3];
    matNueva[3][3]=mat[0][3];

    //Loop para llenar los valores en la mat original, y asÃ­ el primer For loop funciona
    for(int i=0; i<4; i++){
      for(int j=0; j<4; j++){
        mat[i][j]=matNueva[i][j];
      }
    }
  }
  display(matNueva);
}

void cases(int mat[4][4],int giros){

  if(giros<0){
    giros= giros%4;
    giros= giros+4;
  }

  if(giros%4 ==0 || giros ==0){
    display(mat);
  }
  else if(giros%4 ==1 || giros%4 ==-3){
    turn(mat,giros);
  }
  else if(giros%4 ==2 || giros%4 ==-2){
    turn(mat,giros);
  }
  else if(giros%4 ==3 || giros%4 ==-1){
    turn(mat,giros);
  }
}

int main(){
  //cout<<"Cuantos giros va a dar?"<<endl;
  int giros;
  cin>>giros;

  //cout<<"Type the numbers:"<<endl;
  int mat[4][4];
  for(int i=0; i<4; i++){
    for(int j=0; j<4; j++){
      cin>>mat[i][j];
    }
  }
  cases(mat,giros);
}
